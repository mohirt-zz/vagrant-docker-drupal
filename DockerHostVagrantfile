# -*- mode: ruby -*-
# vi: set ft=ruby :

Vagrant.configure(2) do |config|
  config.vm.define "PROJECT_CODE_dockerhost" do |d|
    d.vm.box = "ubuntu/trusty64"
    d.vm.provision "docker"

    d.vm.hostname = "PROJECT_CODE-dockerhost"
    d.vm.network "private_network", ip: "DOCKER_HOST_IP"

    # Uncomment below to enable nfs for faster performance.
    #d.vm.synced_folder '.', '/vagrant', type: "nfs"

    # Comment below if you are using nfs.
    d.vm.synced_folder '.', '/vagrant'

    d.vm.provider "virtualbox" do |vb|
      # You may change the cpus and memory.
      vb.cpus = 4
      vb.memory = "2048"
    end

    d.vm.provision "shell", inline:
      "ps aux | grep 'sshd:' | awk '{print $2}' | xargs kill"
  end
end
